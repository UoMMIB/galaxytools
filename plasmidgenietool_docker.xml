<tool id="plasmidgenietool" name="Plasmid Genie Tool" version="0.1.0">
  <requirements>
    <container type="docker">sbc1</container>
  </requirements>
    <description>generate order list and plasmids.</description>
    <command detect_errors="exit_code"><![CDATA[
            cd $__tool_directory__/code/PlasmidGenieClient; 
	    python plasmid_genie/client.py $ice.input2 $ice.input3 $ice.input4 $ice.input6 $input1 $output1 $input5
    ]]></command>
    <inputs>
    	<param name="input1" type="data" label="Plasmids" help="Plasmid csv file" format="txt"/>
    	<param name="input5" type="text" label="Restriction enzymes" value="MlyI"
	       help="Comma separated restriction enzymes" />
	 <section name="ice" title="ICE Options" expanded="false">
    	   <param name="input2" type="text" label="ICE Server" help="ICE registry server" 
		  value="https://ice.synbiochem.co.uk"/>
    	   <param name="input3" type="text" label="ICE User" help="ICE user name">
	     <sanitizer invalid_char="">
               <valid initial="string.ascii_letters,string.digits,string.punctuation">
		 <add value="_" />
               </valid>
	     </sanitizer>
	   </param>
    	   <param name="input4" type="text" label="ICE Pass" help="ICE login"/>
	     <sanitizer invalid_char="">
               <valid initial="string.ascii_letters,string.digits,string.punctuation">
		 <add value="_" />
               </valid>
	     </sanitizer>
	   <param name="input6" type="text" label="ICE Group" help="ICE Group" value="synbiochem"/>
	</section>
    </inputs>
    <outputs>
        <data name="output1" format="csv" from_work_dir="out.zip" />
    </outputs>
    <environment_variables>
      <environment_variable name="PYTHONPATH">$__tool_directory__/code/PlasmidGenieClient</environment_variable>
    </environment_variables>
    <help><![CDATA[
    PlasmidGenie: generate plasmids, parts and oligos list for a given combinatorial library.

    Inputs:

    - Plasmids: txt file generated by DoE.
    - Restriction enzymes: comma separated restriction enzymes.
    - ICE details.

    Outputs:
    
    - zip file with parts list and plasmid mapping.
    
.. class:: infomark

Pablo Carbonell, SYNBIOCHEM, University of Manchester, 2020.
    ]]></help>
</tool>
